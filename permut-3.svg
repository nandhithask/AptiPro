<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 450">
  <!-- Definitions -->
  <defs>
    <linearGradient id="headerGradient" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#0c4a6e;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#0284c7;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="cardGradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#ffffff;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#f8fafc;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="formulaBg" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#bae6fd;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#e0f2fe;stop-opacity:1" />
    </linearGradient>
    <filter id="cardShadow" x="-2%" y="-2%" width="104%" height="108%">
      <feDropShadow dx="0" dy="2" stdDeviation="2" flood-opacity="0.1" flood-color="#000000"/>
    </filter>
    <pattern id="subtlePattern" width="100" height="100" patternUnits="userSpaceOnUse">
      <rect width="100" height="100" fill="#f8fafc"/>
      <path d="M0 10L100 10M10 0L10 100M20 0L20 100M30 0L30 100M40 0L40 100M50 0L50 100M60 0L60 100M70 0L70 100M80 0L80 100M90 0L90 100M0 20L100 20M0 30L100 30M0 40L100 40M0 50L100 50M0 60L100 60M0 70L100 70M0 80L100 80M0 90L100 90" stroke="#e5e7eb" stroke-width="0.5" />
    </pattern>
  </defs>

  <!-- Background -->
  <rect width="1000" height="450" fill="url(#subtlePattern)" />
  
  <!-- Header -->
  <rect x="0" y="0" width="1000" height="85" fill="url(#headerGradient)" />
  <text x="50" y="55" font-family="Arial, sans-serif" font-size="32" font-weight="bold" fill="#ffffff">Advanced Scenarios</text>
  <text x="50" y="80" font-family="Arial, sans-serif" font-size="16" font-style="italic" fill="#bae6fd">Complex permutation and combination problems</text>
  
  <!-- Main Card -->
  <rect x="30" y="105" width="940" height="325" rx="12" fill="url(#cardGradient)" stroke="#e2e8f0" stroke-width="1" filter="url(#cardShadow)" />

  <!-- Formula 1 -->
  <circle cx="60" cy="150" r="15" fill="#0284c7" />
  <text x="60" y="155" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#ffffff" text-anchor="middle">1</text>
  <rect x="90" y="125" width="840" height="50" rx="8" fill="url(#formulaBg)" />
  <text x="110" y="145" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#0c4a6e">Derangement (No Item in Original Position): !n = n! × [1 - 1/1! + 1/2! - ... + (-1)ⁿ/n!]</text>
  <text x="110" y="165" font-family="Arial, sans-serif" font-size="14" font-style="italic" fill="#0284c7">(e.g., !3 = 2)</text>

  <!-- Formula 2 -->
  <circle cx="60" cy="210" r="15" fill="#0284c7" />
  <text x="60" y="215" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#ffffff" text-anchor="middle">2</text>
  <rect x="90" y="185" width="840" height="60" rx="8" fill="url(#formulaBg)" />
  <text x="110" y="205" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#0c4a6e">Division into Groups:</text>
  <text x="140" y="230" font-family="Arial, sans-serif" font-size="16" fill="#0c4a6e">• Distinct groups: C(n, r) × C(n-r, s) × ...</text>
  <text x="450" y="230" font-family="Arial, sans-serif" font-size="16" fill="#0c4a6e">• Identical groups: Divide by group count factorial.</text>

  <!-- Formula 3 -->
  <circle cx="60" cy="280" r="15" fill="#0284c7" />
  <text x="60" y="285" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#ffffff" text-anchor="middle">3</text>
  <rect x="90" y="255" width="840" height="50" rx="8" fill="url(#formulaBg)" />
  <text x="110" y="285" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#0c4a6e">Inclusion-Exclusion Principle: |A ∪ B| = |A| + |B| - |A ∩ B|</text>
  <text x="620" y="285" font-family="Arial, sans-serif" font-size="14" font-style="italic" fill="#0284c7">(For counting arrangements with restrictions)</text>

  <!-- Formula 4 -->
  <circle cx="60" cy="340" r="15" fill="#0284c7" />
  <text x="60" y="345" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#ffffff" text-anchor="middle">4</text>
  <rect x="90" y="315" width="840" height="50" rx="8" fill="url(#formulaBg)" />
  <text x="110" y="345" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#0c4a6e">Hockey Stick Identity: C(r, r) + C(r+1, r) + ... + C(n, r) = C(n+1, r+1)</text>
  
  <!-- Decorative Geometric Elements -->
  <circle cx="950" cy="30" r="12" fill="#ffffff" opacity="0.3" />
  <circle cx="920" cy="45" r="8" fill="#ffffff" opacity="0.3" />
  <circle cx="935" cy="20" r="5" fill="#ffffff" opacity="0.3" />
  
  <!-- Bottom Design Element -->
  <path d="M30,430 C200,410 400,440 600,420 S800,430 970,420" stroke="#7dd3fc" stroke-width="2" fill="none" />
</svg>
